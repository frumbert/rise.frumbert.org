<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>flowchart</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link
		href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
		rel="stylesheet">
	<style>
		* {
			font-family: "Inter", serif;
			font-optical-sizing: auto;
			font-weight: 400;
			font-style: normal;
		}

		b {
			font-weight: 700;
		}

		:root {
			--no: #f36f21;
			--next: #644c9c;
			--submit: #b1b539;
			--yes: #39b546;
			--box: #0080c6;
			--text: #345;
		}

		body {
			margin: 1rem;
			background: #004494;
			color: var(--text);
		}

		.wrapper {
			width: 100%;
		}
		.wrapper>fieldset {
			background: white;
		}

		.decision {
			/* border: 1px solid #00000040; */
			border: none;
			padding: 1rem;
			display: flex;
			flex: 2 1 50%;
			gap: 1rem;
			flex-direction: column;
			align-items: center;
		}
		.decision.yes {
			/* border-color: var(--yes); */
			/* background-color: color-mix(in srgb, var(--yes), transparent 99%); */
		}
		.decision.no {
			/* border-color: var(--no); */
			/* background-color: color-mix(in srgb, var(--no), transparent 99%); */
		}

		fieldset {
			position: relative;
			border-radius: 10px;
		}
		fieldset fieldset {
			border-radius: 0;
		}
		fieldset fieldset.yes::after {
			left: 50%;
			/* border-color: var(--yes); */
		}
		fieldset fieldset::after {
			content: '';
			position: absolute;
			width: 50%;
			border: 1px solid var(--box);
			border-width: 1px 0 0 0;
			left: 0;
			top: -1rem;
			z-index: 1;
		}
		fieldset fieldset.selected > *:not(legend) {
			visibility: visible;
		}
		fieldset fieldset:not(.selected) > *:not(legend) {
			visibility: hidden;
		}

		legend {
			text-align: center;
			cursor: pointer;
			border: 1px solid currentColor;
			background: white;
			border-radius: 50%;
			padding: .3rem .7rem;
			position: relative;
			z-index: 2;
		}
		legend.yes { border-color: var(--yes); }
		legend.no { border-color: var(--no); }
		legend::after, span::after {
			content:'';
			border-left-width: 1px;
			border-left-style: solid;
			border-left-color: var(--box);
			width: 1px;
			height: 1.1rem;
			top: 100%;
			position: absolute;
			left: 50%;
		}
		span::after {
			height: 2rem;
		}
		span.leaf::after {
			display:none;
		}

		span {
			padding: .5rem;
			border: 1px solid var(--box);
			background-color: var(--box);
			color: white;
			text-shadow: 1px 1px 0 black;
			border-radius: .5rem;
			display: inline-block;
			position: relative;
		}
		fieldset.no > span:first-of-type {
			background-color: white;
			border: 1px solid var(--box);
			text-shadow: none;
			color: black;
		}

		span+span {
			margin-top: .5rem;
		}

		.yes-no-container {
			display: flex;
		}
	</style>
	</style>
</head>

<body>
	<div class="wrapper"></div>

	<script type="text/javascript">

	const obj = {
    "label": "Is the guest a member of the immediate family, such as a parent, sibling, or child of the couple getting married?",
    "choices": {
        "Yes": {
            "label": "Has the guest expressed any specific seating preferences, such as wanting to sit near a window or away from the band?",
            "choices": {
                "Yes": {
                    "label": "Try to accommodate the guestâ€™s seating preference as much as possible, even if it requires rearranging other guests.|Is the preferred seat available and does it not conflict with other important arrangements?",
                    "choices": {
                        "Yes": {
                            "label": "Assign the guest to their preferred seat and notify them in advance so they are aware.",
                            "choices": {}
                        },
                        "No": {
                            "label": "Politely explain the situation to the guest and offer the next best available option that meets most of their needs.",
                            "choices": {}
                        }
                    }
                },
                "No": {
                    "label": "Seat the guest at the main family table, ensuring they are close to the couple and other immediate family members.",
                    "choices": {}
                }
            }
        },
        "No": {
            "label": "Is the guest a close friend who has a strong connection to either the bride or groom and knows several other attendees?",
            "choices": {
                "Yes": {
                    "label": "Would the guest feel more comfortable sitting with mutual friends, or would they prefer to meet new people at a mixed table?",
                    "choices": {
                        "Yes": {
                            "label": "Seat the guest with their group of friends, making sure the table is lively and enjoyable for everyone.",
                            "choices": {}
                        },
                        "No": {
                            "label": "Assign the guest to a mixed table with a balance of familiar faces and new acquaintances to encourage mingling.",
                            "choices": {}
                        }
                    }
                },
                "No": {
                    "label": "Is the guest a colleague from work, a distant relative, or someone who does not know many other guests at the wedding?",
                    "choices": {
                        "Yes": {
                            "label": "Place the guest at a table with other colleagues, distant relatives, or guests in a similar situation to foster conversation.",
                            "choices": {}
                        },
                        "No": {
                            "label": "Seat the guest at a general table with a diverse mix of attendees to help them feel included and welcome.",
                            "choices": {}
                        }
                    }
                }
            }
        }
    }
};

		let container = document.querySelector('.wrapper');

		// recursive, add child nodes to tree
		function render(parentNode, data, legend) {
			let el = document.createElement('fieldset');
			el.className = `decision ${legend && legend.toLowerCase()}`; 
			parentNode.appendChild(el);
			if (legend) el.insertAdjacentHTML('afterbegin', `<legend class='${legend && legend.toLowerCase()}'>${legend}</legend>`);
			if (data.label) {
				data.label.split('|').forEach(s => {
					el.insertAdjacentHTML('beforeend', `<span>${s}</span>`);
				});
			}
			if (data.choices.hasOwnProperty('Yes')) {
				let x = document.createElement('div');
				x.className = 'yes-no-container';
				render(x, data.choices.Yes, 'Yes');
				render(x, data.choices.No, 'No');
				el.appendChild(x);
			} else {
				el.querySelector('span:last-of-type').classList.add('leaf');
			}
		}
		render(container, obj);

		// clicking yes/no toggles classname, for visibilty
		container.addEventListener('click', handleClick);
		function handleClick(e) {
			let tgt = e.target.closest('legend');
			if (tgt) tgt.parentNode.classList.toggle('selected');
		}

	</script>
</body>

</html>